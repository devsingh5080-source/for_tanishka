<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>For Tanishka ‚ù§Ô∏è</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           CSS VARIABLES
           ============================================ */
        :root {
            --color-primary: #ff4d8f;
            --color-primary-dark: #ff1c68;
            --color-text-light: #ffffff;
            
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 40px;
            --spacing-xl: 60px;
            
            --radius-lg: 50px;
            
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.15);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.25);
            --shadow-strong: 0 12px 40px rgba(0, 0, 0, 0.35);
            
            --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ============================================
           RESET & BASE
           ============================================ */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }
        
        body {
            height: 100dvh;
            width: 100vw;
            overflow: hidden;
            font-family: var(--font-body);
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
            color: var(--color-text-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ============================================
           BACKGROUND SLIDESHOW
           ============================================ */
        #slideshow {
            position: fixed;
            inset: 0;
            z-index: 0;
        }
        
        #slideshow::after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.25);
        }
        
        .slide {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        /* ============================================
           START SCREEN
           ============================================ */
        #start-screen {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            z-index: 99999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: var(--spacing-lg);
            cursor: pointer;
            transition: opacity 0.5s;
        }

        #start-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .start-envelope {
            font-size: 120px;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 30px rgba(255, 77, 143, 0.5));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .start-btn {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            padding: 18px 50px;
            border-radius: var(--radius-lg);
            font-size: 20px;
            font-weight: 600;
            font-family: var(--font-body);
            border: none;
            box-shadow: var(--shadow-medium);
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .start-btn:hover {
            transform: scale(1.05);
        }

        /* ============================================
           FLOATING HEARTS
           ============================================ */
        #particles-layer {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none;
        }
        
        .heart-particle {
            position: absolute;
            font-size: 28px;
            animation: floatUp 10s linear forwards;
            opacity: 0;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(110vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* ============================================
           MAIN CARD
           ============================================ */
        .card {
            background: transparent;
            border: none;
            padding: var(--spacing-xl) var(--spacing-lg);
            text-align: center;
            width: 90%;
            max-width: 600px;
            min-height: 500px;
            z-index: 10;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            opacity: 0;
        }

        .card.visible {
            display: flex;
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        /* ============================================
           MASCOT
           ============================================ */
        .mascot-img {
            width: 180px;
            height: 180px;
            object-fit: cover;
            border-radius: 50%;
            border: 5px solid var(--color-primary);
            margin-bottom: var(--spacing-md);
            animation: bounce 2.5s infinite ease-in-out;
            display: none;
            box-shadow: var(--shadow-medium);
        }

        .mascot-emoji {
            font-size: 100px;
            margin-bottom: var(--spacing-md);
            animation: bounce 2.5s infinite ease-in-out;
            display: block;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        .mascot-celebration {
            animation: pop 0.5s ease forwards;
        }

        @keyframes pop {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            60% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* ============================================
           TYPOGRAPHY
           ============================================ */
        h1 {
            font-family: var(--font-display);
            font-weight: 900;
            font-size: clamp(28px, 5vw, 36px);
            margin: 0 0 var(--spacing-lg) 0;
            line-height: 1.3;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.6),
                         0 0 40px rgba(255, 77, 143, 0.4);
        }

        .highlight {
            color: var(--color-primary);
        }

        /* ============================================
           BUTTONS
           ============================================ */
        .btn-container {
            position: relative;
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: var(--spacing-sm);
        }
        
        .btn {
            font-family: var(--font-body);
            font-weight: 700;
            font-size: 18px;
            padding: 16px 48px;
            border-radius: var(--radius-lg);
            border: none;
            cursor: pointer;
            position: absolute;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: var(--shadow-soft);
            user-select: none;
        }

        #yes-btn {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            z-index: 20;
            position: relative;
            font-weight: 700;
        }

        #yes-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(255, 77, 143, 0.5);
        }

        #no-btn {
            background: rgba(255, 255, 255, 0.95);
            color: #666;
            right: 15%;
            z-index: 100;
        }

        #no-btn:hover {
            transform: scale(1.02);
        }

        .replay-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            margin-top: var(--spacing-lg);
            display: none;
            font-weight: 700;
            position: relative !important;
            left: auto !important;
            top: auto !important;
            right: auto !important;
        }

        .replay-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.5);
        }

        .replay-btn.visible {
            display: inline-block;
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* ============================================
           MESSAGE BOX
           ============================================ */
        #msg-box {
            min-height: 32px;
            margin-top: var(--spacing-md);
            color: var(--color-text-light);
            font-weight: 600;
            font-size: 19px;
            font-style: italic;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #msg-box.show {
            opacity: 1;
        }
        
        /* ============================================
           CONFETTI
           ============================================ */
        #confetti {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9999;
        }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 600px) {
            .card {
                padding: var(--spacing-lg) var(--spacing-sm);
                width: 95%;
            }

            h1 {
                font-size: clamp(24px, 6vw, 28px);
            }

            .mascot-emoji {
                font-size: 80px;
            }

            .mascot-img {
                width: 140px;
                height: 140px;
            }

            .btn {
                font-size: 16px;
                padding: 14px 36px;
            }

            .start-envelope {
                font-size: 90px;
            }

            .start-btn {
                font-size: 18px;
                padding: 16px 40px;
            }
        }

        /* ============================================
           ACCESSIBILITY
           ============================================ */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen">
        <div class="start-envelope">üíå</div>
        <button class="start-btn">Tap to Open</button>
    </div>

    <!-- Background Slideshow -->
    <div id="slideshow">
        <div class="slide active" style="background-image: url('pic1.jpg');"></div>
        <div class="slide" style="background-image: url('pic2.jpg');"></div>
        <div class="slide" style="background-image: url('pic3.jpg');"></div>
        <div class="slide" style="background-image: url('pic4.jpg');"></div>
    </div>

    <!-- Floating Hearts -->
    <div id="particles-layer"></div>

    <!-- Main Card -->
    <main class="card" id="main-card">
        <div class="mascot-emoji" id="mascot-emoji">üêª‚Äç‚ùÑÔ∏èüíï</div>
        <img src="celebration.jpg" class="mascot-img" id="mascot-img" alt="Us">

        <h1 id="heading">
            <span class="highlight">Tanishka,</span><br>
            will you be my valentine?
        </h1>
        
        <div class="btn-container" id="btn-container">
            <button class="btn" id="yes-btn">Yes ‚ú®</button>
            <button class="btn" id="no-btn">No üè†</button>
        </div>

        <div id="msg-box"></div>
        
        <button class="btn replay-btn" id="replay-btn">Play Again üîÑ</button>
    </main>

    <!-- Confetti Canvas -->
    <canvas id="confetti"></canvas>

    <!-- Audio -->
    <audio id="sound-dodge" src="dodge.mp3" preload="auto"></audio>
    <audio id="sound-success" src="success.mp3" preload="auto"></audio>
    <audio id="bg-music" src="song.mp3" loop preload="auto"></audio>

    <script>
        'use strict';

        // Configuration
        const CONFIG = {
            audio: {
                bgMusicVolume: 0.08,
                successVolume: 0.85,
                dodgeVolume: 0.80,
                successLoopDuration: 3000
            },
            slideshow: {
                interval: 4000
            },
            particles: {
                spawnInterval: 1200,
                duration: 10000,
                emojis: ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù', '‚ù§Ô∏è']
            },
            buttons: {
                yesScaleIncrement: 0.08,
                yesScaleMax: 1.35,
                noScaleDecrement: 0.1,
                noScaleMin: 0.5
            },
            confetti: {
                particleCount: 150,
                colors: ['#ff6b9d', '#ff9ec7', '#ffb3d9', '#ffd700', '#ff69b4', '#ff1c68']
            },
            messages: [
                "\"No\" seems a bit shy",
                "Just say Yes already!",
                "Are you sure about that?",
                "The No button is running away!",
                "You know you want to say Yes üíï",
                "Come on, give it a try!",
                "No is not an option here üòä"
            ]
        };

        // Elements
        const elements = {
            startScreen: document.getElementById('start-screen'),
            mainCard: document.getElementById('main-card'),
            yesBtn: document.getElementById('yes-btn'),
            noBtn: document.getElementById('no-btn'),
            replayBtn: document.getElementById('replay-btn'),
            msgBox: document.getElementById('msg-box'),
            mascotEmoji: document.getElementById('mascot-emoji'),
            mascotImg: document.getElementById('mascot-img'),
            heading: document.getElementById('heading'),
            btnContainer: document.getElementById('btn-container'),
            particlesLayer: document.getElementById('particles-layer'),
            confettiCanvas: document.getElementById('confetti'),
            slides: document.querySelectorAll('.slide'),
            audio: {
                dodge: document.getElementById('sound-dodge'),
                success: document.getElementById('sound-success'),
                bgMusic: document.getElementById('bg-music')
            }
        };

        // State
        const state = {
            currentSlide: 0,
            dodgeCount: 0,
            isGameStarted: false,
            particleSpawnInterval: null,
            confettiAnimationId: null
        };

        // Slideshow
        function initSlideshow() {
            setInterval(() => {
                elements.slides[state.currentSlide].classList.remove('active');
                state.currentSlide = (state.currentSlide + 1) % elements.slides.length;
                elements.slides[state.currentSlide].classList.add('active');
            }, CONFIG.slideshow.interval);
        }

        // Audio
        function initAudio() {
            const { audio } = elements;
            audio.bgMusic.volume = CONFIG.audio.bgMusicVolume;
            audio.success.volume = CONFIG.audio.successVolume;
            audio.dodge.volume = CONFIG.audio.dodgeVolume;

            [audio.dodge, audio.success].forEach(sound => {
                sound.play().then(() => {
                    sound.pause();
                    sound.currentTime = 0;
                }).catch(() => {});
            });

            audio.bgMusic.play().catch(() => {});
        }

        function playSound(soundElement) {
            soundElement.currentTime = 0;
            soundElement.play().catch(() => {});
        }

        function playCelebrationSound() {
            const { success } = elements.audio;
            success.loop = true;
            success.play().catch(() => {});

            setTimeout(() => {
                success.pause();
                success.currentTime = 0;
                success.loop = false;
            }, CONFIG.audio.successLoopDuration);
        }

        // Particles
        function spawnParticle() {
            const particle = document.createElement('div');
            particle.className = 'heart-particle';
            particle.textContent = CONFIG.particles.emojis[
                Math.floor(Math.random() * CONFIG.particles.emojis.length)
            ];
            particle.style.left = `${Math.random() * 100}vw`;
            elements.particlesLayer.appendChild(particle);
            setTimeout(() => particle.remove(), CONFIG.particles.duration);
        }

        function startParticleSystem() {
            state.particleSpawnInterval = setInterval(
                spawnParticle, 
                CONFIG.particles.spawnInterval
            );
        }

        // Button Interactions
        function handleNoButton(e) {
            if (e && e.type === 'touchstart') {
                e.preventDefault();
            }

            playSound(elements.audio.dodge);

            const boxRect = elements.btnContainer.getBoundingClientRect();
            const btnRect = elements.noBtn.getBoundingClientRect();
            const maxLeft = Math.max(0, boxRect.width - btnRect.width);
            const maxTop = Math.max(0, boxRect.height - btnRect.height);
            const randomLeft = Math.floor(Math.random() * maxLeft);
            const randomTop = Math.floor(Math.random() * maxTop);

            elements.noBtn.style.position = 'absolute';
            elements.noBtn.style.right = 'auto';
            elements.noBtn.style.left = `${randomLeft}px`;
            elements.noBtn.style.top = `${randomTop}px`;

            elements.msgBox.textContent = CONFIG.messages[state.dodgeCount % CONFIG.messages.length];
            elements.msgBox.classList.add('show');
            state.dodgeCount++;

            const yesScale = Math.min(
                1 + (state.dodgeCount * CONFIG.buttons.yesScaleIncrement),
                CONFIG.buttons.yesScaleMax
            );
            const noScale = Math.max(
                1 - (state.dodgeCount * CONFIG.buttons.noScaleDecrement),
                CONFIG.buttons.noScaleMin
            );

            elements.yesBtn.style.transform = `scale(${yesScale})`;
            elements.noBtn.style.transform = `scale(${noScale})`;
        }

        function handleYesButton() {
            playCelebrationSound();

            elements.mascotEmoji.style.display = 'none';
            elements.mascotImg.style.display = 'block';
            elements.mascotImg.classList.add('mascot-celebration');
            
            elements.heading.innerHTML = "Yay! I knew you'd say yes! üíñ";
            elements.btnContainer.style.display = 'none';
            elements.msgBox.style.display = 'none';

            setTimeout(() => {
                elements.replayBtn.classList.add('visible');
            }, 1500);

            startConfetti();
        }

        // Confetti
        function startConfetti() {
            const canvas = elements.confettiCanvas;
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < CONFIG.confetti.particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    color: CONFIG.confetti.colors[
                        Math.floor(Math.random() * CONFIG.confetti.colors.length)
                    ],
                    size: Math.random() * 8 + 4,
                    speedY: Math.random() * 3 + 2,
                    speedX: (Math.random() - 0.5) * 2,
                    rotation: 0,
                    rotationSpeed: (Math.random() - 0.5) * 10
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(p => {
                    p.y += p.speedY;
                    p.x += p.speedX;
                    p.rotation += p.rotationSpeed;

                    if (p.y > canvas.height) {
                        p.y = -20;
                        p.x = Math.random() * canvas.width;
                    }

                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate((p.rotation * Math.PI) / 180);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    ctx.restore();
                });

                state.confettiAnimationId = requestAnimationFrame(animate);
            }

            animate();
        }

        // Reset
        function resetGame() {
            if (state.confettiAnimationId) {
                cancelAnimationFrame(state.confettiAnimationId);
                state.confettiAnimationId = null;
            }

            const ctx = elements.confettiCanvas.getContext('2d');
            ctx.clearRect(0, 0, elements.confettiCanvas.width, elements.confettiCanvas.height);

            elements.audio.success.pause();
            elements.audio.success.currentTime = 0;

            state.dodgeCount = 0;

            elements.mascotImg.style.display = 'none';
            elements.mascotImg.classList.remove('mascot-celebration');
            elements.mascotEmoji.style.display = 'block';
            elements.heading.innerHTML = '<span class="highlight">Tanishka,</span><br>will you be my valentine?';
            elements.btnContainer.style.display = 'flex';
            elements.msgBox.style.display = 'block';
            elements.msgBox.textContent = '';
            elements.msgBox.classList.remove('show');
            elements.replayBtn.classList.remove('visible');

            elements.yesBtn.style.transform = 'scale(1)';
            elements.noBtn.style.transform = 'scale(1)';
            elements.noBtn.style.position = 'absolute';
            elements.noBtn.style.right = '15%';
            elements.noBtn.style.left = 'auto';
            elements.noBtn.style.top = 'auto';
        }

        // Start Game
        function startGame() {
            if (state.isGameStarted) return;
            state.isGameStarted = true;

            initAudio();
            elements.startScreen.classList.add('hidden');
            
            setTimeout(() => {
                elements.startScreen.style.display = 'none';
                elements.mainCard.classList.add('visible');
                startParticleSystem();
            }, 500);
        }

        // Event Listeners
        function initEventListeners() {
            elements.startScreen.addEventListener('click', startGame);
            elements.yesBtn.addEventListener('click', handleYesButton);
            elements.noBtn.addEventListener('mouseover', handleNoButton);
            elements.noBtn.addEventListener('touchstart', handleNoButton, { passive: false });
            elements.replayBtn.addEventListener('click', resetGame);

            window.addEventListener('resize', () => {
                if (state.confettiAnimationId) {
                    elements.confettiCanvas.width = window.innerWidth;
                    elements.confettiCanvas.height = window.innerHeight;
                }
            });
        }

        // Initialize
        function init() {
            initSlideshow();
            initEventListeners();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
