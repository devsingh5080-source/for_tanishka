<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>For Tanishka ‚ù§Ô∏è</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           CSS VARIABLES & DESIGN TOKENS
           ============================================ */
        :root {
            --color-primary: #ff4d8f;
            --color-primary-dark: #ff1c68;
            --color-secondary: #ff6b9d;
            --color-accent: #ffd700;
            --color-text-light: #ffffff;
            --color-text-muted: #e0e0e0;
            --color-overlay: rgba(0, 0, 0, 0.25);
            
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            
            --spacing-xs: 8px;
            --spacing-sm: 16px;
            --spacing-md: 24px;
            --spacing-lg: 40px;
            --spacing-xl: 60px;
            
            --radius-sm: 12px;
            --radius-md: 20px;
            --radius-lg: 50px;
            
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.15);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.25);
            --shadow-strong: 0 12px 40px rgba(0, 0, 0, 0.35);
            
            --transition-fast: 0.2s ease-out;
            --transition-medium: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            
            --z-background: 0;
            --z-hearts: 1;
            --z-card: 10;
            --z-confetti: 9999;
            --z-overlay: 99999;
        }

        /* ============================================
           RESET & BASE STYLES
           ============================================ */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }
        
        body {
            height: 100dvh;
            width: 100vw;
            overflow: hidden;
            font-family: var(--font-body);
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
            color: var(--color-text-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ============================================
           BACKGROUND SLIDESHOW
           ============================================ */
        #slideshow {
            position: fixed;
            inset: 0;
            z-index: var(--z-background);
            will-change: opacity;
        }
        
        #slideshow::after {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--color-overlay);
            backdrop-filter: brightness(0.9);
        }
        
        .slide {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.8s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: opacity;
        }

        .slide.active {
            opacity: 1;
        }

        /* ============================================
           START SCREEN OVERLAY
           ============================================ */
        #start-screen {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(1.2);
            z-index: var(--z-overlay);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: var(--spacing-lg);
            cursor: pointer;
            transition: opacity 0.5s var(--transition-medium);
        }

        #start-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .start-envelope {
            font-size: 120px;
            animation: floatEnvelope 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 30px rgba(255, 77, 143, 0.5));
        }

        @keyframes floatEnvelope {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .start-btn {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            padding: var(--spacing-sm) var(--spacing-xl);
            border-radius: var(--radius-lg);
            font-size: 20px;
            font-weight: 600;
            font-family: var(--font-body);
            border: none;
            box-shadow: var(--shadow-medium), 0 0 40px rgba(255, 77, 143, 0.3);
            cursor: pointer;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
            animation: gentlePulse 2.5s ease-in-out infinite;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-strong), 0 0 60px rgba(255, 77, 143, 0.5);
        }
        
        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        /* ============================================
           FLOATING HEARTS BACKGROUND
           ============================================ */
        #bg-layer {
            position: fixed;
            inset: 0;
            z-index: var(--z-hearts);
            pointer-events: none;
            overflow: hidden;
        }
        
        .heart-bg {
            position: absolute;
            font-size: 28px;
            animation: floatUp 10s linear forwards;
            opacity: 0;
            filter: drop-shadow(0 0 8px rgba(255, 100, 150, 0.6));
            will-change: transform, opacity;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(110vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg) scale(1.2);
                opacity: 0;
            }
        }

        /* ============================================
           MAIN CARD
           ============================================ */
        .card {
            background: transparent;
            border: none;
            backdrop-filter: none;
            border-radius: 0;
            padding: var(--spacing-xl) var(--spacing-lg);
            text-align: center;
            width: 90%;
            max-width: 600px;
            min-height: 500px;
            z-index: var(--z-card);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            box-shadow: none;
            opacity: 0;
            transform: translateY(30px);
        }

        .card.visible {
            display: flex;
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================
           MASCOT IMAGERY
           ============================================ */
        .mascot-img {
            width: 180px;
            height: 180px;
            object-fit: cover;
            border-radius: 50%;
            border: 5px solid var(--color-primary);
            margin-bottom: var(--spacing-md);
            animation: gentleBounce 3s infinite ease-in-out;
            display: none;
            box-shadow: var(--shadow-medium), 0 0 40px rgba(255, 77, 143, 0.3);
        }

        .mascot-emoji {
            font-size: 100px;
            margin-bottom: var(--spacing-md);
            animation: gentleBounce 3s infinite ease-in-out;
            display: block;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
        }

        @keyframes gentleBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-12px) scale(1.05); }
        }

        @keyframes celebrationPop {
            0% {
                transform: scale(0.3) rotate(-10deg);
                opacity: 0;
            }
            60% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }
        
        /* ============================================
           TYPOGRAPHY
           ============================================ */
        h1 {
            font-family: var(--font-display);
            font-weight: 900;
            color: var(--color-text-light);
            font-size: clamp(28px, 5vw, 36px);
            margin: 0 0 var(--spacing-lg) 0;
            line-height: 1.3;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.6),
                         0 0 40px rgba(255, 77, 143, 0.4);
            letter-spacing: 0.5px;
        }

        .highlight {
            color: var(--color-primary);
            font-weight: 900;
            display: inline-block;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        /* ============================================
           BUTTON SYSTEM
           ============================================ */
        .btn-box {
            position: relative;
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: var(--spacing-sm);
        }
        
        .btn {
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 18px;
            padding: 16px 48px;
            border-radius: var(--radius-lg);
            border: none;
            cursor: pointer;
            position: absolute;
            transition: transform var(--transition-fast),
                        background var(--transition-medium),
                        box-shadow var(--transition-fast);
            box-shadow: var(--shadow-soft);
            user-select: none;
        }

        #yes-btn {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            color: white;
            z-index: 20;
            position: relative;
            font-weight: 700;
            animation: glowPulse 2.5s ease-in-out infinite;
        }

        #yes-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(255, 77, 143, 0.5);
        }

        @keyframes glowPulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 77, 143, 0.7);
            }
            50% {
                box-shadow: 0 0 0 15px rgba(255, 77, 143, 0);
            }
        }

        #no-btn {
            background: rgba(255, 255, 255, 0.95);
            color: #666;
            right: 15%;
            z-index: 100;
            transition: all 0.18s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        #no-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.02);
        }

        .replay-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            margin-top: var(--spacing-lg);
            display: none;
            font-weight: 700;
            box-shadow: var(--shadow-medium);
            position: relative !important;
            left: auto !important;
            top: auto !important;
            right: auto !important;
        }

        .replay-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.5);
        }

        .replay-btn.visible {
            display: inline-block;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
        }
        
        /* ============================================
           MESSAGE BOX
           ============================================ */
        #msg-box {
            min-height: 32px;
            margin-top: var(--spacing-md);
            color: var(--color-text-light);
            font-weight: 600;
            font-size: 19px;
            font-style: italic;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: opacity var(--transition-medium);
            animation: fadeInMessage 0.5s forwards;
        }

        @keyframes fadeInMessage {
            to { opacity: 1; }
        }
        
        /* ============================================
           CONFETTI CANVAS
           ============================================ */
        #confetti {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: var(--z-confetti);
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */
        @media (max-width: 600px) {
            .card {
                padding: var(--spacing-lg) var(--spacing-sm);
                width: 95%;
            }

            h1 {
                font-size: clamp(24px, 6vw, 28px);
                margin-bottom: var(--spacing-md);
            }

            .mascot-emoji {
                font-size: 80px;
            }

            .mascot-img {
                width: 140px;
                height: 140px;
            }

            .btn {
                font-size: 16px;
                padding: 14px 36px;
            }

            .start-envelope {
                font-size: 90px;
            }

            .start-btn {
                font-size: 18px;
                padding: 14px 40px;
            }
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .hidden {
            display: none !important;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen Overlay -->
    <div id="start-screen" role="button" aria-label="Start experience" tabindex="0">
        <div class="start-envelope" aria-hidden="true">üíå</div>
        <button class="start-btn">Tap to Open</button>
    </div>

    <!-- Background Slideshow -->
    <div id="slideshow" aria-hidden="true">
        <div class="slide active" style="background-image: url('pic1.jpg');" role="img" aria-label="Background image 1"></div>
        <div class="slide" style="background-image: url('pic2.jpg');" role="img" aria-label="Background image 2"></div>
        <div class="slide" style="background-image: url('pic3.jpg');" role="img" aria-label="Background image 3"></div>
        <div class="slide" style="background-image: url('pic4.jpg');" role="img" aria-label="Background image 4"></div>
    </div>

    <!-- Floating Hearts Layer -->
    <div id="bg-layer" aria-hidden="true"></div>

    <!-- Main Card -->
    <main class="card" id="main-card" role="main">
        <div class="mascot-emoji" id="mascot-emoji" aria-hidden="true">üêª‚Äç‚ùÑÔ∏èüíï</div>
        <img src="celebration.jpg" class="mascot-img" id="mascot-img" alt="Celebration photo">

        <h1 id="heading">
            <span class="highlight">Tanishka,</span><br>
            will you be my valentine?
        </h1>
        
        <div class="btn-box" id="btn-box">
            <button class="btn" id="yes-btn" aria-label="Say yes">Yes ‚ú®</button>
            <button class="btn" id="no-btn" aria-label="Say no">No üè†</button>
        </div>

        <div id="msg-box" role="status" aria-live="polite"></div>
        
        <button class="btn replay-btn" id="replay-btn" aria-label="Play again">
            Play Again üîÑ
        </button>
    </main>

    <!-- Confetti Canvas -->
    <canvas id="confetti" aria-hidden="true"></canvas>

    <!-- Audio Elements -->
    <audio id="sound-dodge" src="dodge.mp3" preload="auto" aria-hidden="true"></audio>
    <audio id="sound-success" src="success.mp3" preload="auto" aria-hidden="true"></audio>
    <audio id="bg-music" src="song.mp3" loop preload="auto" aria-hidden="true"></audio>

    <script>
        'use strict';

        // ============================================
        // CONFIGURATION & CONSTANTS
        // ============================================
        const CONFIG = {
            audio: {
                bgMusicVolume: 0.12,
                successVolume: 0.7,
                dodgeVolume: 0.65,
                successLoopDuration: 3000
            },
            slideshow: {
                interval: 4000,
                transitionDuration: 1800
            },
            hearts: {
                spawnInterval: 1200,
                duration: 10000,
                emojis: ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù', '‚ù§Ô∏è']
            },
            buttons: {
                yesScaleIncrement: 0.08,
                yesScaleMax: 1.35,
                noScaleDecrement: 0.1,
                noScaleMin: 0.5
            },
            confetti: {
                particleCount: 180,
                colors: ['#ff6b9d', '#ff9ec7', '#ffb3d9', '#ffd700', '#ff69b4', '#ff1c68']
            },
            messages: [
                "\"No\" seems a bit shy",
                "Just say Yes already!",
                "Are you sure about that?",
                "The No button is running away!",
                "You know you want to say Yes üíï",
                "Come on, give it a try!",
                "No is not an option here üòä",
                "The universe says Yes!",
                "Why are you resisting? üí´"
            ]
        };

        // ============================================
        // DOM ELEMENT REFERENCES
        // ============================================
        const elements = {
            startScreen: document.getElementById('start-screen'),
            mainCard: document.getElementById('main-card'),
            yesBtn: document.getElementById('yes-btn'),
            noBtn: document.getElementById('no-btn'),
            replayBtn: document.getElementById('replay-btn'),
            msgBox: document.getElementById('msg-box'),
            mascotEmoji: document.getElementById('mascot-emoji'),
            mascotImg: document.getElementById('mascot-img'),
            heading: document.getElementById('heading'),
            btnBox: document.getElementById('btn-box'),
            bgLayer: document.getElementById('bg-layer'),
            confettiCanvas: document.getElementById('confetti'),
            slides: document.querySelectorAll('.slide'),
            audio: {
                dodge: document.getElementById('sound-dodge'),
                success: document.getElementById('sound-success'),
                bgMusic: document.getElementById('bg-music')
            }
        };

        // ============================================
        // STATE MANAGEMENT
        // ============================================
        const state = {
            currentSlide: 0,
            dodgeCount: 0,
            isGameStarted: false,
            heartSpawnInterval: null,
            confettiAnimationId: null
        };

        // ============================================
        // SLIDESHOW FUNCTIONALITY
        // ============================================
        function initSlideshow() {
            setInterval(() => {
                elements.slides[state.currentSlide].classList.remove('active');
                state.currentSlide = (state.currentSlide + 1) % elements.slides.length;
                elements.slides[state.currentSlide].classList.add('active');
            }, CONFIG.slideshow.interval);
        }

        // ============================================
        // AUDIO MANAGEMENT
        // ============================================
        function initAudio() {
            const { audio } = elements;
            const { bgMusicVolume, successVolume, dodgeVolume } = CONFIG.audio;

            // Set volumes
            audio.bgMusic.volume = bgMusicVolume;
            audio.success.volume = successVolume;
            audio.dodge.volume = dodgeVolume;

            // Preload sounds by playing and immediately pausing
            [audio.dodge, audio.success].forEach(sound => {
                sound.play()
                    .then(() => {
                        sound.pause();
                        sound.currentTime = 0;
                    })
                    .catch(() => {
                        console.log('Audio preload failed - will work on user interaction');
                    });
            });

            // Start background music
            audio.bgMusic.play().catch(() => {
                console.log('Background music will play after user interaction');
            });
        }

        function playSound(soundElement) {
            soundElement.currentTime = 0;
            soundElement.play().catch(() => {});
        }

        function playCelebrationSound() {
            const { success } = elements.audio;
            success.loop = true;
            success.play().catch(() => {});

            setTimeout(() => {
                success.pause();
                success.currentTime = 0;
                success.loop = false;
            }, CONFIG.audio.successLoopDuration);
        }

        // ============================================
        // FLOATING HEARTS
        // ============================================
        function spawnHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart-bg';
            heart.textContent = CONFIG.hearts.emojis[
                Math.floor(Math.random() * CONFIG.hearts.emojis.length)
            ];
            heart.style.left = `${Math.random() * 100}vw`;
            heart.style.animationDuration = `${8 + Math.random() * 4}s`;
            
            elements.bgLayer.appendChild(heart);
            
            setTimeout(() => heart.remove(), CONFIG.hearts.duration);
        }

        function startHeartSpawning() {
            state.heartSpawnInterval = setInterval(spawnHeart, CONFIG.hearts.spawnInterval);
        }

        // ============================================
        // BUTTON INTERACTIONS
        // ============================================
        function handleNoButton(e) {
            if (e && e.type === 'touchstart') {
                e.preventDefault();
            }

            playSound(elements.audio.dodge);

            // Calculate random position within button box
            const boxRect = elements.btnBox.getBoundingClientRect();
            const btnRect = elements.noBtn.getBoundingClientRect();
            const maxLeft = Math.max(0, boxRect.width - btnRect.width);
            const maxTop = Math.max(0, boxRect.height - btnRect.height);
            const randomLeft = Math.floor(Math.random() * maxLeft);
            const randomTop = Math.floor(Math.random() * maxTop);

            // Move button
            elements.noBtn.style.position = 'absolute';
            elements.noBtn.style.right = 'auto';
            elements.noBtn.style.left = `${randomLeft}px`;
            elements.noBtn.style.top = `${randomTop}px`;

            // Update message
            elements.msgBox.textContent = CONFIG.messages[state.dodgeCount % CONFIG.messages.length];
            state.dodgeCount++;

            // Scale buttons
            const yesScale = Math.min(
                1 + (state.dodgeCount * CONFIG.buttons.yesScaleIncrement),
                CONFIG.buttons.yesScaleMax
            );
            const noScale = Math.max(
                1 - (state.dodgeCount * CONFIG.buttons.noScaleDecrement),
                CONFIG.buttons.noScaleMin
            );

            elements.yesBtn.style.transform = `scale(${yesScale})`;
            elements.noBtn.style.transform = `scale(${noScale})`;
        }

        function handleYesButton() {
            playCelebrationSound();

            // Visual transitions
            elements.mascotEmoji.style.display = 'none';
            elements.mascotImg.style.display = 'block';
            elements.mascotImg.style.animation = 'celebrationPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards';
            
            elements.heading.innerHTML = "Yay! I knew you'd say yes! üíñ";
            elements.btnBox.style.display = 'none';
            elements.msgBox.style.display = 'none';

            // Show replay button after a short delay
            setTimeout(() => {
                elements.replayBtn.classList.add('visible');
            }, 1500);

            startConfetti();
        }

        // ============================================
        // CONFETTI SYSTEM
        // ============================================
        function startConfetti() {
            const canvas = elements.confettiCanvas;
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // Create particles
            const particles = [];
            for (let i = 0; i < CONFIG.confetti.particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    color: CONFIG.confetti.colors[
                        Math.floor(Math.random() * CONFIG.confetti.colors.length)
                    ],
                    size: Math.random() * 10 + 4,
                    speedY: Math.random() * 3 + 2,
                    speedX: (Math.random() - 0.5) * 2.5,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 15
                });
            }

            // Animation loop
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.y += particle.speedY;
                    particle.x += particle.speedX;
                    particle.rotation += particle.rotationSpeed;

                    // Reset particle if it goes off screen
                    if (particle.y > canvas.height) {
                        particle.y = -20;
                        particle.x = Math.random() * canvas.width;
                    }

                    // Draw particle
                    ctx.save();
                    ctx.translate(particle.x, particle.y);
                    ctx.rotate((particle.rotation * Math.PI) / 180);
                    ctx.fillStyle = particle.color;
                    ctx.fillRect(
                        -particle.size / 2,
                        -particle.size / 2,
                        particle.size,
                        particle.size
                    );
                    ctx.restore();
                });

                state.confettiAnimationId = requestAnimationFrame(animate);
            }

            animate();
        }

        // ============================================
        // REPLAY/RESET FUNCTIONALITY
        // ============================================
        function resetGame() {
            // Stop confetti animation
            if (state.confettiAnimationId) {
                cancelAnimationFrame(state.confettiAnimationId);
                state.confettiAnimationId = null;
            }

            // Clear confetti canvas
            const ctx = elements.confettiCanvas.getContext('2d');
            ctx.clearRect(0, 0, elements.confettiCanvas.width, elements.confettiCanvas.height);

            // Stop celebration sound
            elements.audio.success.pause();
            elements.audio.success.currentTime = 0;

            // Reset state
            state.dodgeCount = 0;

            // Reset visuals
            elements.mascotImg.style.display = 'none';
            elements.mascotEmoji.style.display = 'block';
            elements.heading.innerHTML = '<span class="highlight">Tanishka,</span><br>will you be my valentine?';
            elements.btnBox.style.display = 'flex';
            elements.msgBox.style.display = 'block';
            elements.msgBox.textContent = '';
            elements.replayBtn.classList.remove('visible');

            // Reset button scales and positions
            elements.yesBtn.style.transform = 'scale(1)';
            elements.noBtn.style.transform = 'scale(1)';
            elements.noBtn.style.position = 'absolute';
            elements.noBtn.style.right = '15%';
            elements.noBtn.style.left = 'auto';
            elements.noBtn.style.top = 'auto';
        }

        // ============================================
        // GAME START
        // ============================================
        function startGame() {
            if (state.isGameStarted) return;
            state.isGameStarted = true;

            initAudio();

            // Hide start screen
            elements.startScreen.classList.add('hidden');
            
            // Show main card
            setTimeout(() => {
                elements.startScreen.style.display = 'none';
                elements.mainCard.classList.add('visible');
                startHeartSpawning();
            }, 500);
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        function initEventListeners() {
            // Start screen
            elements.startScreen.addEventListener('click', startGame);
            elements.startScreen.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    startGame();
                }
            });

            // Yes button
            elements.yesBtn.addEventListener('click', handleYesButton);

            // No button (multiple events for cross-device compatibility)
            elements.noBtn.addEventListener('mouseover', handleNoButton);
            elements.noBtn.addEventListener('touchstart', handleNoButton, { passive: false });

            // Replay button
            elements.replayBtn.addEventListener('click', resetGame);

            // Window resize handler for confetti
            window.addEventListener('resize', () => {
                if (state.confettiAnimationId) {
                    elements.confettiCanvas.width = window.innerWidth;
                    elements.confettiCanvas.height = window.innerHeight;
                }
            });
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        function init() {
            initSlideshow();
            initEventListeners();
        }

        // Start when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
